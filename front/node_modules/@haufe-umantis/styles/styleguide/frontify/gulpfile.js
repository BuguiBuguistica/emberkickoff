const   {task, src, dest} = require('gulp'),
        sass = require("gulp-sass"),
        frontifyApi = require('@frontify/frontify-api'),
        sassVariables = require('gulp-sass-variables');


// TO DO
// gulp.task('patterns', function() {
//     frontifyApi.syncPatterns({
//         access_token: '35ed1f989cb431c2648d2e1c48660ad8ee152deb',
//         project: '18632',
//         baseUrl: 'https://haufegroup.frontify.com'},
//         ['patterns/**/*.json']).catch(function(err) {
//             console.error(err);
//     });
// });

task('default', function () {
    // for export fonts
    // src('../../assets/fonts/**/*.*')
    //     .pipe(dest('./assets/fonts/'));
    src('../../people-os/base.scss')
        .pipe(sassVariables({
            $env: 'frontify'
        }))
        .pipe(sass({outputStyle: 'compressed'}))
        .pipe(dest('./assets/css/'));
    console.log("---- css generated, uploading to frontify");
    return frontifyApi.syncAssets({
        access_token: '35ed1f989cb431c2648d2e1c48660ad8ee152deb',
        project: '18632',
        baseUrl: 'https://haufegroup.frontify.com',
        cwd: ''
    }, ['./assets/**/*.*']).catch(function (err) {
        console.error(err);
    });
});



